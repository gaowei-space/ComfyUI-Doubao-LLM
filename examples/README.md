# 示例工作流

本目录包含了使用豆包大模型节点的示例工作流，帮助您快速上手和理解如何在ComfyUI中使用这些节点。

## 示例列表

### 1. 基础文本对话 (basic_text_chat.json)

**功能**: 演示如何使用豆包模型进行基础的文本对话。

**工作流结构**:
```
豆包API配置 → 豆包文本对话 → 文本显示
豆包模型配置 ↗
```

**使用步骤**:
1. 导入 `basic_text_chat.json` 到ComfyUI
2. 在豆包API配置节点中设置您的API密钥（或使用环境变量）
3. 在豆包文本对话节点中输入您的问题
4. 可选：修改系统提示词来调整AI的行为
5. 运行工作流查看AI的回复

**参数说明**:
- **模型**: `doubao-pro-4k` - 适合一般对话
- **最大Token**: `1000` - 控制回复长度
- **温度**: `0.7` - 平衡创造性和准确性
- **Top-p**: `0.9` - 控制输出多样性

### 2. 视觉理解对话 (vision_chat.json)

**功能**: 演示如何使用豆包视觉模型分析图像并进行对话。

**工作流结构**:
```
图像加载 → 豆包视觉对话 → 文本显示
豆包API配置 ↗
豆包模型配置 ↗
```

**使用步骤**:
1. 导入 `vision_chat.json` 到ComfyUI
2. 在图像加载节点中选择要分析的图片
3. 确保豆包模型配置使用视觉模型（如 `doubao-pro-vision`）
4. 在豆包视觉对话节点中输入关于图像的问题
5. 运行工作流查看AI对图像的分析

**参数说明**:
- **模型**: `doubao-pro-vision` - 支持视觉理解的模型
- **用户提示词**: 关于图像的具体问题
- **系统提示词**: 指导AI如何分析图像

## 使用前准备

### 1. API密钥配置

**方法一：环境变量（推荐）**
```bash
export DOUBAO_API_KEY="your_api_key_here"
```

**方法二：节点输入**
直接在豆包API配置节点中输入API密钥。

### 2. 依赖检查

确保已安装所有必需的依赖：
```bash
cd /path/to/ComfyUI/custom_nodes/comfyui-doubao-llm
pip install -r requirements.txt
```

## 自定义示例

### 修改对话内容

1. **用户提示词**: 在对话节点中修改您想问的问题
2. **系统提示词**: 调整AI的角色和行为方式

示例系统提示词：
- 专业助手："你是一个专业的AI助手，请提供准确和有用的信息。"
- 创意写手："你是一个富有创意的写手，请用生动有趣的语言回答问题。"
- 技术专家："你是一个技术专家，请提供详细的技术解释和建议。"

### 调整模型参数

**温度 (Temperature)**:
- `0.0-0.3`: 更确定性的回答，适合事实性问题
- `0.4-0.7`: 平衡的回答，适合一般对话
- `0.8-1.0`: 更有创造性的回答，适合创意任务

**Top-p**:
- `0.1-0.5`: 更保守的输出
- `0.6-0.9`: 平衡的输出质量
- `0.9-1.0`: 更多样化的输出

**最大Token数**:
- 根据需要的回复长度调整
- 注意API的计费和限制

## 高级用法示例

### 多轮对话

虽然当前示例是单轮对话，您可以通过以下方式实现多轮对话：

1. 使用文本连接节点组合历史对话
2. 在用户提示词中包含对话历史
3. 调整系统提示词以维持对话上下文

### 批量处理

对于批量图像分析或文本处理：

1. 使用ComfyUI的批处理功能
2. 连接多个豆包节点处理不同任务
3. 使用循环或条件节点控制流程

### 结果后处理

您可以在豆包节点后添加：

1. 文本处理节点（如格式化、提取关键词）
2. 保存节点（将结果保存到文件）
3. 其他AI节点（进一步处理结果）

## 故障排除

### 常见问题

1. **API密钥错误**
   - 检查API密钥是否正确设置
   - 确认环境变量配置

2. **模型不支持视觉**
   - 确保在视觉对话中使用视觉模型
   - 检查模型名称是否正确

3. **网络连接问题**
   - 检查网络连接
   - 确认API端点地址

4. **输出为空或错误**
   - 检查输入参数是否合理
   - 查看ComfyUI控制台的错误信息

### 调试技巧

1. **启用详细日志**
   - 在ComfyUI设置中启用详细日志
   - 查看控制台输出的详细信息

2. **测试API连接**
   - 使用简单的文本对话测试API连接
   - 确认API密钥和端点配置正确

3. **逐步调试**
   - 从简单的配置开始
   - 逐步添加复杂的参数和功能

## 贡献示例

如果您创建了有用的工作流示例，欢迎贡献：

1. 创建清晰的工作流文件
2. 添加详细的说明文档
3. 提供使用截图（可选）
4. 提交Pull Request

---

更多信息请参考主README文档和开发文档。如有问题，请在GitHub上提交Issue。